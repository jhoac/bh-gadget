<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
    <ModulePrefs title="Bullhorn" thumbnail="http://1agb93314bcf1knhv22id9u9.wpengine.netdna-cdn.com/wp-content/uploads/2016/09/BH-bull-orange.png"> 
        <Require feature="dynamic-height"/>
        <Optional feature="google.calendar-0.5.read"/>
    </ModulePrefs> 
    <Content type="html">
        <![CDATA[
            <html>
                <body>
                    <div id="gadgetBody">Test Email</div>
                    <div id="record">{{ records[0].name }} - {{ records[0].email }}</div>
                    <script>
                        function subscribeEventCallback(calendarEvent) {
                            var out;
                            if (calendarEvent) {
                                out = "Emails: "
                                for (var i = 0; i < calendarEvent.attendeeCount; i++) {
                                    $scope.records.push({ name: calendarEvent.attendees[i].name, email: calendarEvent.attendees[i].email})
                                }
                                document.getElementById("gadgetBody").innerHTML = out;
                                gadgets.window.adjustHeight();
                            }
                        };
                        google.calendar.read.subscribeToEvents(subscribeEventCallback);
                    </script>
                </body>
            </html>
        ]]>
    </Content> 
</Module>
