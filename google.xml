<Module>
    <ModulePrefs title="subscribeToEvents Test" height="200" author="me"
    <Optional feature="google.calendar-0.5.read"/>
    </ModulePrefs>
    <Content type="html">
        <![CDATA[
        <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
            <html>
                <body>
                    <div id="out">No event</div>
                    <script>
                        function subscribeEventsCallback(e) {
                            var html = 'No event';
                            if (e) {
                                html = gadgets.json.stringify(e);
                            }
                            document.getElementById('out').innerHTML = gadgets.util.escapeString(html);
                        }

                        ///https://www.google.com/calendar/b/1/render?gadgeturl=http://devblog.meeterapp.com/wp-content/uploads/2015/03/fess_subscribe_to_dates.xml#main_7
                        // The gadget containers request that we do NOT run any JS inline.
                        // Instead, register a callback handler.
                        gadgets.util.registerOnLoadHandler(function() {
                            google.calendar.read.subscribeToEvents(subscribeEventsCallback);
                        });


                        function showEvent(){
                            google.calendar.showEvent(localEevent.id);
                        }
                    </script>
                </body>
            </html>
        ]]>
    </Content>
</Module>